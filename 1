package com.machineleaning.controller;

import com.machineleaning.common.JsonMessage;
import com.machineleaning.dto.ClassfierRequest;
import com.machineleaning.dto.StackingRequest;
import org.springframework.core.io.ClassPathResource;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.ModelAndView;
import weka.classifiers.Classifier;
import weka.core.Attribute;
import weka.core.DenseInstance;
import weka.core.Instance;
import weka.core.Instances;

import java.util.ArrayList;
import java.util.Arrays;

@RequestMapping("sys2")
@RestController
public class Index2Controller {

    static Classifier classifier2;
    static ArrayList<Attribute> attributes = new ArrayList<>();

    static {
        try {
            ClassPathResource classPathResource = new ClassPathResource("MIMIC_cluster.model");
            classifier2 = (Classifier) weka.core.SerializationHelper.read(classPathResource.getInputStream());

            Attribute attribute = new Attribute("label");
            attributes.add(attribute);
            attributes.add(new Attribute("apsiii"));
            attributes.add(new Attribute("hemoglobin_min"));
            attributes.add(new Attribute("aniongap_max"));
            attributes.add(new Attribute("bicarbonate_max"));
            attributes.add(new Attribute("bun_max"));
            attributes.add(new Attribute("glucose_max"));
            attributes.add(new Attribute("sodium_max"));
            attributes.add(new Attribute("potassium_max"));
            attributes.add(new Attribute("fio2"));
        } catch (Exception e) {
            e.printStackTrace();
